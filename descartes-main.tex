% [[- LaTeX prelude
\documentclass[12pt,letterpaper]{book}

\usepackage[no-math]{fontspec}
\setmainfont{Baskerville}

\usepackage{polyglossia}
\setdefaultlanguage{english}
\setotherlanguage[variant=medieval]{latin}
\setotherlanguage[variant=ancient]{greek}
\newfontfamily\greekfont[Script=Greek]{Times New Roman}

\usepackage{csquotes}
\usepackage[style=nottsclassic,backend=biber]{biblatex}
\addbibresource{descartes.bib}
\usepackage{bibentry}
\nobibliography*
\usepackage{enumitem}
\setlist{noitemsep}
\usepackage[super]{nth}
\usepackage[linktoc=all]{hyperref}

\usepackage[noend,nofamiliar,noledgroup,series={A}]{reledmac}
\Xlemmaseparator[A]{:}

% Insert AT numbers and a marker for where the division occurs
\newcommand{\at}[1]{%
    |\ledsidenote{{#1}}%
}

% Wrapper for textual notes. Use as follows:
% \var{word or phrase}{comment}
\newcommand{\var}[2]{%
    {#1}\footnote{{#1} : {#2}}%
}
% Second wrapper for textual variants. Use as follows:
% \vvar{word or phrase}{source}{alternative}{source}
\newcommand{\vvar}[4]{%
    {#1}\footnote{{#1} \textbf{{#2}} : {#3} \textbf{{#4}}}%
}
% A wrapper for introducing new items into the commentary
\newcommand{\lemc}[1]{\textbf{{#1}:}}
\newcommand{\lem}[1]{\textbf{{#1}}}

% Hackish way to make abbreviations look the way I want them to
\newcommand{\abbrlabel}[1]{\makebox[3cm][l]{\textbf{#1}}}
\newenvironment{abbreviations}{%
    \begin{list}{}{\renewcommand{\makelabel}{\abbrlabel}%
    \setlength{\labelwidth}{3cm}\setlength{\leftmargin}{\labelwidth+\labelsep}%
    \setlength{\itemsep}{0pt}}}{\end{list}%
}

% Clear space under a chunk of text before printing notes.
\newcommand{\prenotes}{%
    \bigskip
    \bigskip
    \footnoterule
    \bigskip
}

\begin{hyphenrules}{latin}
    \hyphenation{pro-inde su-per-ex-tru-xi}
\end{hyphenrules}

\begin{hyphenrules}{english}
    \hyphenation{Des-cartes pos-sent}
\end{hyphenrules}
% -]]

% [[- Document-
\begin{document}

\nocite{*}

\include{descartes-titlepage}

\frontmatter
    \include{descartes-toc}
    \include{descartes-abbreviations}

\mainmatter
    \include{descartes-introduction}
    \include{meditatio-prima}
    \include{meditatio-secunda}
    \include{descartes-background}
    \include{descartes-vocabulary}

\backmatter
    \printbibliography

\end{document}
% -]]
